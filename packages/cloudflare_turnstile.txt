<-- START_DESCRIPTION -->

Cloudflare Turnstile Flutter Package
=====================================

The Cloudflare Turnstile Flutter package is a powerful tool for protecting your Flutter applications from bots and other automated threats. It provides a simple and effective way to integrate Cloudflare's Turnstile CAPTCHA solution into your app, allowing you to verify the authenticity of user interactions and prevent abuse.

When to Use This Package
------------------------

You should use this package in any situation where you need to protect your app from automated threats, such as:

*   User registration and login forms
*   Comment sections and forums
*   Contact forms and support requests
*   E-commerce transactions and payment processing

Features
--------

The Cloudflare Turnstile Flutter package provides the following features:

*   Simple and easy-to-use API for integrating Turnstile CAPTCHA into your app
*   Support for both Android and iOS platforms
*   Customizable widget for displaying the CAPTCHA challenge
*   Automatic verification of user responses

<-- END_DESCRIPTION -->

<-- START_TUTORIAL -->

Setup and Configuration
-----------------------

To use the Cloudflare Turnstile Flutter package, you'll need to follow these steps:

### Step 1: Add the Package to Your Project

Add the following dependency to your `pubspec.yaml` file:

```yml
dependencies:
  cloudflare_turnstile: ^1.0.0
```

Then, run `flutter pub get` to install the package.

### Step 2: Import the Package

Import the package in your Dart file:

```dart
import 'package:cloudflare_turnstile/cloudflare_turnstile.dart';
```

### Step 3: Create a Turnstile Instance

Create a new instance of the `Turnstile` class, passing in your Cloudflare Turnstile site key and secret key:

```dart
Turnstile turnstile = Turnstile(
  siteKey: 'YOUR_SITE_KEY',
  secretKey: 'YOUR_SECRET_KEY',
);
```

### Step 4: Display the CAPTCHA Challenge

Use the `TurnstileWidget` to display the CAPTCHA challenge:

```dart
TurnstileWidget(
  turnstile: turnstile,
  onVerified: (token) {
    // User has completed the CAPTCHA challenge
  },
)
```

### Platform-Specific Details

#### Android

To use the Cloudflare Turnstile Flutter package on Android, you'll need to add the following configuration to your `AndroidManifest.xml` file:

```xml
<application>
  ...
  <meta-data
    android:name="com.cloudflare.turnstile.SITE_KEY"
    android:value="YOUR_SITE_KEY" />
  <meta-data
    android:name="com.cloudflare.turnstile.SECRET_KEY"
    android:value="YOUR_SECRET_KEY" />
</application>
```

#### iOS

To use the Cloudflare Turnstile Flutter package on iOS, you'll need to add the following configuration to your `Info.plist` file:

```xml
<key>CFBundleURLTypes</key>
<array>
  <dict>
    <key>CFBundleURLName</key>
    <string>com.cloudflare.turnstile</string>
    <key>CFBundleURLSchemes</key>
    <array>
      <string>YOUR_SITE_KEY</string>
    </array>
  </dict>
</array>
```

<-- END_TUTORIAL -->

<-- START_MAIN -->

```dart
import 'package:flutter/material.dart';
import 'package:cloudflare_turnstile/cloudflare_turnstile.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Cloudflare Turnstile Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: MyHomePage(),
    );
  }
}

class MyHomePage extends StatefulWidget {
  @override
  _MyHomePageState createState() => _MyHomePageState();
}

class _MyHomePageState extends State<MyHomePage> {
  final Turnstile _turnstile = Turnstile(
    siteKey: 'YOUR_SITE_KEY',
    secretKey: 'YOUR_SECRET_KEY',
  );

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Cloudflare Turnstile Demo'),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            TurnstileWidget(
              turnstile: _turnstile,
              onVerified: (token) {
                // User has completed the CAPTCHA challenge
                print('Verified: $token');
              },
            ),
          ],
        ),
      ),
    );
  }
}
```

// This is the main entry point of the app.
// The MyApp widget is the root of the app.
// The MyHomePage widget is the home page of the app.
// The TurnstileWidget is used to display the CAPTCHA challenge.
// When the user completes the CAPTCHA challenge, the onVerified callback is called.
// The verified token is printed to the console.

// To use this app, replace 'YOUR_SITE_KEY' and 'YOUR_SECRET_KEY' with your actual Cloudflare Turnstile site key and secret key.
// Then, run the app on a device or emulator.
// The CAPTCHA challenge will be displayed on the screen.
// Complete the CAPTCHA challenge to verify your identity.
// The verified token will be printed to the console.

<-- END_MAIN -->