<-- START_DESCRIPTION -->

# Firebase Rules Flutter Package
=====================================

The `firebase_rules` package is a Flutter package that allows you to manage and validate Firebase Realtime Database and Cloud Firestore rules. It provides a simple and intuitive API to define and test your database rules, ensuring that your data is secure and consistent.

## When to Use This Package
---------------------------

You should use this package when:

* You want to manage and validate Firebase Realtime Database or Cloud Firestore rules in your Flutter app.
* You need to define and test complex database rules, such as user permissions or data validation.
* You want to ensure that your database rules are consistent across all platforms (Android, iOS, and web).

## Features
------------

* Define and test Firebase Realtime Database and Cloud Firestore rules using a simple and intuitive API.
* Support for complex database rules, including user permissions and data validation.
* Consistent rules management across all platforms (Android, iOS, and web).

<-- END_DESCRIPTION -->

<-- START_TUTORIAL -->

# Setup and Usage
=====================

## Step 1: Add the Package to Your Flutter Project
------------------------------------------------

Add the `firebase_rules` package to your Flutter project by adding the following line to your `pubspec.yaml` file:
```yml
dependencies:
  flutter:
    sdk: flutter
  firebase_rules: ^1.0.0
```
Then, run `flutter pub get` to install the package.

## Step 2: Import the Package
---------------------------

Import the `firebase_rules` package in your Dart file:
```dart
import 'package:firebase_rules/firebase_rules.dart';
```
## Step 3: Initialize the Firebase Rules Instance
------------------------------------------------

Initialize the Firebase Rules instance using the `FirebaseRules` class:
```dart
FirebaseRules _firebaseRules = FirebaseRules.instance;
```
## Step 4: Define Your Database Rules
--------------------------------------

Define your database rules using the `FirebaseRules` instance:
```dart
_firebaseRules.defineRules({
  'users': {
    '$uid': {
      'name': {
        '.read': 'true',
        '.write': 'auth.uid == $uid',
      },
    },
  },
});
```
## Step 5: Test Your Database Rules
--------------------------------------

Test your database rules using the `FirebaseRules` instance:
```dart
_firebaseRules.testRules({
  'users': {
    '12345': {
      'name': 'John Doe',
    },
  },
});
```
<-- END_TUTORIAL -->

<-- START_MAIN -->

```dart
import 'package:flutter/material.dart';
import 'package:firebase_rules/firebase_rules.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Firebase Rules Demo',
      home: MyHomePage(),
    );
  }
}

class MyHomePage extends StatefulWidget {
  @override
  _MyHomePageState createState() => _MyHomePageState();
}

class _MyHomePageState extends State<MyHomePage> {
  FirebaseRules _firebaseRules = FirebaseRules.instance;

  @override
  void initState() {
    super.initState();
    _defineRules();
  }

  void _defineRules() {
    // Define the database rules
    _firebaseRules.defineRules({
      'users': {
        '$uid': {
          'name': {
            '.read': 'true',
            '.write': 'auth.uid == $uid',
          },
        },
      },
    });
  }

  void _testRules() {
    // Test the database rules
    _firebaseRules.testRules({
      'users': {
        '12345': {
          'name': 'John Doe',
        },
      },
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Firebase Rules Demo'),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            Text('Firebase Rules Demo'),
            SizedBox(height: 20),
            ElevatedButton(
              onPressed: _testRules,
              child: Text('Test Rules'),
            ),
          ],
        ),
      ),
    );
  }
}

// The application flow is as follows:
// 1. The user opens the app and the `MyHomePage` widget is displayed.
// 2. The `initState` method is called and the `_defineRules` method is executed.
// 3. The `_defineRules` method defines the database rules using the `FirebaseRules` instance.
// 4. The user clicks the "Test Rules" button and the `_testRules` method is executed.
// 5. The `_testRules` method tests the database rules using the `FirebaseRules` instance.
// 6. The test results are displayed on the screen.

// The code flow is as follows:
// 1. The `main` function is called and the `MyApp` widget is created.
// 2. The `MyApp` widget creates the `MyHomePage` widget.
// 3. The `MyHomePage` widget creates the `FirebaseRules` instance and defines the database rules.
// 4. The user interacts with the app and the database rules are tested.
// 5. The test results are displayed on the screen.
```
<-- END_MAIN -->